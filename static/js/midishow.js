"use strict";var domain="https://midishow.saobby.com";function show_error_msg(e){gebi("error-msg").innerHTML=e,gebi("notice-div").hidden=!0,gebi("success-div").hidden=!0,gebi("error-div").hidden=!1,set_btn_html(gebi("download-btn"))}function download(){var e=gebi("url").value;e?(set_btn_html(gebi("download-btn"),"..."),saobbyCaptchaV2.open_window_and_return_promise().then((function(i){set_btn_html(gebi("download-btn"),"请等几秒");var n={url:e,captcha_token:i.captcha_token};fetch_data(domain+"/api/download_midi","POST",headers,JSON.stringify(n)).then((function(e){var i=JSON.parse(e.response_text);if(i.success){var n=b642link(i.data.file);gebi("download-link").href=n,gebi("download-link").download=i.data.title.replaceAll("\\","、").replaceAll("/","、").replaceAll(":","：").replaceAll("*","⭐").replaceAll("?","？").replaceAll('"',"'").replaceAll("<","《").replaceAll(">","》").replaceAll("|"," ")+".mid",gebi("midi-player").src=n,gebi("notice-div").hidden=!0,gebi("error-div").hidden=!0,gebi("success-div").hidden=!1}else show_error_msg(i.message);set_btn_html(gebi("download-btn"))}),(function(e){show_error_msg(e.message),set_btn_html(gebi("download-btn"))}))}),(function(e){show_error_msg("请先完成人机验证:"+e.message),set_btn_html(gebi("download-btn"))}))):show_error_msg("请输入 MIDI 查看页面网址")}gebi("midi-visualizer").config={noteHeight:8,noteSpacing:1,pixelsPerTimeStep:100,noteRGB:"80, 100, 225",activeNoteRGB:"255, 85, 65"};