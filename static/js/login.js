"use strict";var domain="https://comments.saobby.com";function login(){""!==gebi("username").value&&""!==gebi("password").value?(set_btn_html(gebi("login-btn"),"请完成人机验证"),saobbyCaptchaV2.open_window_and_return_promise().then((function(e){set_btn_html(gebi("login-btn"),"请稍候");var t={username:gebi("username").value,password:gebi("password").value,captcha_token:gebi("scpc-token").value};fetch_data(domain+"/api/login","POST",headers,JSON.stringify(t)).then((function(e){var t=JSON.parse(e.response_text);t.success?(localStorage.setItem("access-token",t.data.access_token),localStorage.login_redirect?(window.location=localStorage.login_redirect,delete localStorage.login_redirect):window.location="/"):(set_btn_html(gebi("login-btn")),gebi("result").innerHTML=t.message)}),(function(e){set_btn_html(gebi("login-btn")),gebi("result").innerHTML=e.message}))}),(function(e){set_btn_html(gebi("login-btn")),gebi("result").innerHTML="请先完成人机验证:"+e.message}))):gebi("result").innerHTML="用户名和密码均不能为空!"}