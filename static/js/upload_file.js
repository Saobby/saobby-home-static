"use strict";function upload_file(){var e=gebi("file").files[0];void 0!==e?(set_btn_html(gebi("upload-btn"),"请完成人机验证"),gebi("file").disabled=!0,saobbyCaptchaV2.open_window_and_return_promise().then((function(t){set_btn_html(gebi("upload-btn"),"正在上传");var a=new FormData,i=new XMLHttpRequest;i.open("post","https://github-picbed.saobby.com/api/github_picbed",!0),i.onreadystatechange=function(){if(4===this.readyState){var e=JSON.parse(this.responseText);e.success?(gebi("upload_result").innerHTML="上传成功",gebi("file_url").value=e.data.url,gebi("markdown").value="![]("+e.data.url+")"):gebi("upload_result").innerHTML=e.message,set_btn_html(gebi("upload-btn")),gebi("file").disabled=!1}},i.upload.onprogress=function(e){if(e.lengthComputable){var t=100*e.loaded/e.total;100===t?(gebi("upload_result").innerHTML="正在处理...",gebi("upload-progress").hidden=!0):(gebi("upload_result").innerHTML="上传中("+Math.floor(t)+"%)",gebi("upload-progress").value=t,gebi("upload-progress").hidden=!1)}},a.append("file",e),a.append("captcha_token",t.captcha_token),i.send(a)}),(function(e){gebi("upload_result").innerHTML="请先完成人机验证:"+e.message,gebi("file").disabled=!1,set_btn_html(gebi("upload-btn"))}))):gebi("upload_result").innerHTML="你未选择任何文件"}