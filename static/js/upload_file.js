function upload_file(){void 0!==gebi("file").files[0]?(get_captcha_img(),gebi("captcha-window").hidden=!1):gebi("upload_result").innerHTML="你未选择任何文件"}function complete_captcha(){gebi("upload-btn").innerHTML="上传中",gebi("upload-btn").disabled=!0;var e=gebi("file").files[0],t=gebi("captcha-token").value,n=new FormData,d=new XMLHttpRequest;d.open("post","https://saobby.pythonanywhere.com/api/github_picbed",!0),d.onreadystatechange=function(){4==this.readyState&&(ret_json=JSON.parse(this.responseText),ret_json.success?(gebi("upload_result").innerHTML="上传成功",gebi("file_url").value=ret_json.data.url,gebi("markdown").value="![]("+ret_json.data.url+")"):gebi("upload_result").innerHTML=ret_json.message,gebi("upload-btn").innerHTML="上传",gebi("upload-btn").disabled=!1)},d.upload.onprogress=function(e){if(e.lengthComputable){var t=100*e.loaded/e.total;gebi("upload_result").innerHTML=100==t?"正在处理...":"上传中("+Math.floor(t)+"%)"}},n.append("file",e),n.append("captcha_token",t),d.send(n)}