function upload_file(){void 0!==document.getElementById("file").files[0]?(get_captcha_img(),document.getElementById("captcha-window").hidden=!1):document.getElementById("upload_result").innerHTML="你未选择任何文件"}function complete_captcha(){document.getElementById("upload-btn").innerHTML="上传中",document.getElementById("upload-btn").disabled=!0;var e=document.getElementById("file").files[0],t=document.getElementById("captcha-token").value,n=new FormData,d=new XMLHttpRequest;d.open("post","https://saobby.pythonanywhere.com/api/github_picbed",!0),d.onreadystatechange=function(){4==this.readyState&&(ret_json=JSON.parse(this.responseText),ret_json.success?(document.getElementById("upload_result").innerHTML="上传成功",document.getElementById("file_url").value=ret_json.data.url,document.getElementById("markdown").value="![]("+ret_json.data.url+")"):document.getElementById("upload_result").innerHTML=ret_json.message,document.getElementById("upload-btn").innerHTML="上传",document.getElementById("upload-btn").disabled=!1)},d.upload.onprogress=function(e){if(e.lengthComputable){var t=100*e.loaded/e.total;document.getElementById("upload_result").innerHTML=100==t?"正在处理...":"上传中("+Math.floor(t)+"%)"}},n.append("file",e),n.append("captcha_token",t),d.send(n)}