"use strict";var headers={"Content-Type":"application/json"};function gebi(t){return document.getElementById(t)}function gebcn(t){return document.getElementsByClassName(t)}function fetch_data(t,e,n,r){return new Promise((function(i,a){var o=new XMLHttpRequest;for(var s in o.open(e,t,!0),n)o.setRequestHeader(s,n[s]);try{"GET"===e?o.send():o.send(r)}catch(t){a({message:t.name+t.message})}o.onreadystatechange=function(){4===o.readyState&&(0===o.status?a({message:"网络错误"}):i({response_text:o.responseText,status_code:o.status}))},o.onerror=function(){a({message:"网络错误"})}}))}function fetch_api(t,e){return new Promise((function(n,r){fetch_data(t,"POST",headers,JSON.stringify(e)).then((function(t){try{var e=JSON.parse(t.response_text)}catch(t){n({retcode:-1,msg:t,data:null})}n({retcode:e.success?0:-2,msg:e.message,data:e.data})}),(function(t){n({retcode:-3,msg:t.message,data:null})}))}))}function is_in(t,e){for(var n in e)if(t===e[n])return!0;return!1}function include(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}function ts2str(t){return(t=new Date(1e3*t)).getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}function rsc(t){return t?t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;"):t}function get_url_args(){var t=window.location.href,e={};if(t.includes("?")){var n=t.split("?").slice(1).join("?").split("&");for(var r in n){var i=n[r];if(i.includes("=")){var a=i.split("=");e[a[0]]=a.slice(1).join("=")}else e[i]=null}}return e}function check_logged_in(){return null===localStorage.getItem("access-token")&&(localStorage.login_redirect=window.location.href,window.location="/login",!0)}function get_element_abs_pos2(t){for(var e=t.offsetTop,n=t.offsetLeft;t=t.offsetParent;)e+=t.offsetTop,n+=t.offsetLeft;return{left:n,top:e}}function icon_with_text(t,e){return'<img src="/static/image/icon/'.concat(t,'.svg" alt="" width="16px" class="middle"><span class="middle">').concat(e,"</span>")}function set_btn_html(t,e){e?(t.getAttribute("old_html")||t.setAttribute("old_html",t.innerHTML),t.innerHTML=e,t.disabled=!0):(t.getAttribute("old_html")&&(t.innerHTML=t.getAttribute("old_html"),t.removeAttribute("old_html")),t.disabled=!1)}function b642link(t,e){for(var n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);var a=new Blob([r],{type:e});return URL.createObjectURL(a)}function input_file2b64(t){return new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){e(this.result.split(",")[1])}}))}function insert_into_textarea(t,e){var n=e.selectionStart,r=e.selectionEnd,i=e.value,a=i.substring(0,n)+t+i.substring(r,i.length);e.value=a,e.selectionStart=n+t.length,e.selectionEnd=n+t.length}function is_in_array(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}function add_markdown_tips(){for(var t=gebcn("marked-textarea"),e=0;e<t.length;e++){var n=t[e];n.getAttribute("placeholder")&&!n.getAttribute("markdown-tips-set")&&(n.setAttribute("placeholder",n.getAttribute("placeholder")+"\n提示:\n1. 支持Markdown语法、LaTeX语法\n2. 可直接粘贴图片到输入框，会自动上传\n3. 更多用法请见论坛置顶帖子"),n.setAttribute("markdown-tips-set","true"))}}String.prototype.replaceAll=function(t,e){return this.split(t).join(e)},add_markdown_tips();