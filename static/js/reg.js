"use strict";var domain="https://comments.saobby.com";function reg(){var e=gebi("username").value,t=gebi("password").value,n=gebi("password2").value;""!==e&&""!==t&&""!==n?t===n?(set_btn_html(gebi("reg-btn"),"请完成人机验证"),saobbyCaptchaV2.open_window_and_return_promise().then((function(n){set_btn_html(gebi("reg-btn"),"请稍候"),fetch_data(domain+"/api/register","POST",headers,JSON.stringify({username:e,password:t,captcha_token:gebi("scpc-token").value})).then((function(e){var t=JSON.parse(e.response_text);t.success?(localStorage.setItem("access-token",t.data.access_token),localStorage.login_redirect?(window.location=localStorage.login_redirect,delete localStorage.login_redirect):window.location="/"):(set_btn_html(gebi("reg-btn")),gebi("result").innerHTML=t.message)}),(function(e){set_btn_html(gebi("reg-btn")),gebi("result").innerHTML=e.message}))}),(function(e){set_btn_html(gebi("reg-btn")),gebi("result").innerHTML="请先完成人机验证:"+e.message}))):gebi("result").innerHTML="两次密码输入不一致!":gebi("result").innerHTML="用户名和密码均不能为空!"}