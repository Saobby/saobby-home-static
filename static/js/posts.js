"use strict";var domain="https://comments.saobby.com",page_size=8;function load_posts(e){function s(e){gebi("sort-by-select").disabled=e,gebi("sort-method-select").disabled=e,e?set_btn_html(gebi("search-btn"),"..."):set_btn_html(gebi("search-btn")),gebi("search-field").disabled=e,gebi("search-text").disabled=e;for(var s=gebcn("cp-btn"),t=0;t<s.length;t++)s[t].disabled=e}s(!0);var t=gebi("sort-by-select"),a=gebi("sort-method-select"),i=t.options[t.selectedIndex].value,n=a.options[a.selectedIndex].value,c=gebi("search-field"),o=c.options[c.selectedIndex].value,d=gebi("search-text").value,l={page_index:e,page_size:page_size,sort_by:i,sort_method:n};d&&(l.search_field=o,l.search_text=d),fetch_data(domain+"/api/get_posts_list","POST",headers,JSON.stringify(l)).then((function(e){var t=JSON.parse(e.response_text);if(t.success){var a="";for(var i in t.data.posts){var n=t.data.posts[i],c="";for(var o in n.tags){var d=n.tags[o];c+='<span class="wux-tag simple">'.concat(rsc(d),"</span>")}a+='<div style="border-bottom: 2px solid #ddd;padding:12px 16px;"><a href="/post/?pid='.concat(n.name,'" target="_blank"><b style="font-size:20px"><span style="color:#5064E1;">').concat(n.is_pinned?'<img src="/static/image/icon/pinned-primary.svg" width="24px" alt="[置顶]" class="middle">':"",'</span><span style="color:#').concat(n.is_closed?"AA0000":"00AA00",';">').concat(n.is_closed?'<img src="/static/image/icon/lock-red.svg" width="24px" alt="[已关闭]" class="middle">':'<img src="/static/image/icon/circle-dot-green.svg" width="24px" alt="[开放]" class="middle">','</span><span style="color:#000;">').concat(n.title,"</span></b></a>").concat(c,'<br><span class="middle"><img src="/static/image/icon/user.svg" width="20px" alt="作者" class="middle">').concat(n.author,'</span><span style="color:#777;"> <img src="/static/image/icon/clock-grey.svg" width="20px" alt="发布时间" class="middle">').concat(ts2str(n.modify_time),' <img src="/static/image/icon/thumb-up-grey.svg" width="20px" alt="点赞数" class="middle">').concat(n.loves,' <img src="/static/image/icon/eye-grey.svg" width="20px" alt="访问数" class="middle">').concat(n.views,"</span></div>")}gebi("posts-list-html").innerHTML=a||'<span style="color:#777;">没有帖子</span>',gebi("page-index").innerHTML=(t.data.page_index+1).toString(),gebi("page-amount").innerHTML=t.data.page_amount.toString(),gen_cp_buttons(t.data.page_index+1,t.data.page_amount,7,(function(e){load_posts(e-1)}),gebi("change-page-div"),"wux-btn cp-btn","wux-btn wux-btn-outline cp-btn")}else gebi("posts-list-html").innerHTML="无法加载帖子列表，因为:"+t.message;s(!1)}),(function(e){gebi("posts-list-html").innerHTML="无法加载帖子列表，因为:"+e.message,s(!1)}))}load_posts(0);